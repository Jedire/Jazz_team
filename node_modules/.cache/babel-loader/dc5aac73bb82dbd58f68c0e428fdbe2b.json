{"ast":null,"code":"var _jsxFileName = \"/home/pavel/Projects/Jazz_team/src/components/diary/index.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport { StickyTable, Row, Cell } from 'react-sticky-table';\nimport 'react-sticky-table/dist/react-sticky-table.css';\nimport { auth } from './dateJSON';\n\nclass Table extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      editingTd: null,\n      rowsSelect: [],\n      rows: auth\n    };\n\n    this.onClickCell = event => {\n      const target = event.target;\n      const state = this.state;\n\n      if (target.className.trim() === 'edit-cancel') {\n        this.finishTdEdit(state.editingTd.elem, false);\n      }\n\n      if (target.className.trim() === 'edit-ok') {\n        this.finishTdEdit(state.editingTd.elem, true);\n      }\n\n      if (target.parentNode.classList.contains('sticky-table-row')) {\n        if (event.ctrlKey) {\n          this.selectRow(target.parentNode);\n        }\n      }\n    };\n\n    this.editCell = event => {\n      const target = event.target;\n      const state = this.state;\n\n      if (target.classList.contains('sticky-table-cell')) {\n        if (state.editingTd) return;\n        this.makeTdEditable(target);\n      }\n    };\n  }\n\n  selectRow(el) {\n    const state = this.state;\n\n    if (!el.classList.contains('row-active')) {\n      this.setState({\n        rowsSelect: [...state.rowsSelect, el]\n      });\n      el.classList.add('row-active');\n    } else {\n      el.classList.remove('row-active');\n      const rowsSelect = [...state.rowsSelect];\n      const index = rowsSelect.indexOf(el);\n\n      if (index !== -1) {\n        rowsSelect.splice(index, 1);\n        this.setState({\n          rowsSelect\n        });\n      }\n    }\n  }\n\n  showList() {\n    const state = this.state;\n    return state.rows.map(user => React.createElement(Row, {\n      key: user.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, user.id), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, user.username), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, user.password), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, user.firstName), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, user.lastName), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: user.avatar,\n      height: \"50\",\n      alt: user.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, user.avatar)));\n  }\n\n  showState() {\n    const state = this.state;\n    return React.createElement(\"div\", {\n      className: \"stateTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"State:\"), ' ', state.rows.length, \"/\", state.rowsSelect.length);\n  }\n\n  makeTdEditable(TD) {\n    const td = TD;\n    this.setState({\n      editingTd: {\n        elem: td,\n        data: td.innerHTML\n      }\n    });\n    td.classList.add('edit-td');\n    const textArea = document.createElement('textarea');\n    textArea.style.width = `${td.clientWidth}px`;\n    textArea.style.height = `${td.clientHeight}px`;\n    textArea.className = 'edit-area';\n    textArea.value = td.innerHTML;\n    td.innerHTML = '';\n    td.appendChild(textArea);\n    textArea.focus();\n    td.insertAdjacentHTML('beforeEnd', '<div class=\"edit-controls\"><button class=\"edit-ok\">OK</button><button class=\"edit-cancel\">CANCEL</button></div>');\n  }\n\n  finishTdEdit(TD, isOk) {\n    const state = this.state;\n    const td = TD;\n\n    if (isOk) {\n      td.innerHTML = td.firstChild.value;\n    } else {\n      td.innerHTML = state.editingTd.data;\n    }\n\n    td.classList.remove('edit-td');\n    this.state.editingTd = null;\n  }\n\n  render() {\n    const props = this.props;\n\n    if (props.authActive === false) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"section\", {\n      className: \"full-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B\"), React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\u0416\\u0434\\u044F \\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B, \\u043A\\u043B\\u0438\\u043A\\u043D\\u0438\\u0442\\u0435 \\u0434\\u0432\\u0430\\u0436\\u0434\\u044B \\u043F\\u043E \\u043D\\u0443\\u0436\\u043D\\u043E\\u0439 \\u0432\\u0430\\u043C \\u0435\\u0447\\u0435\\u0439\\u043A\\u0435\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\u0414\\u043B\\u044F \\u0432\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u0435, \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u0439\\u0442\\u0435 \\u0441\\u043E\\u0447\\u0438\\u0442\\u0430\\u043D\\u0438\\u0435 \\u043A\\u043B\\u0430\\u0432\\u0438\\u0448 CTRL + \\u041B\\u0435\\u0432\\u0430\\u044F \\u043A\\u043B\\u0430\\u0432\\u0438\\u0448\\u0430 \\u043C\\u044B\\u0448\\u0438\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"\\u0427\\u0438\\u0441\\u043B\\u043E \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u0432 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u0435 \\u0438 \\u0447\\u0438\\u0441\\u043B\\u043E \\u0432\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0441\\u0442\\u0440\\u043E\\u043A, \\u043C\\u043E\\u0436\\u043D\\u043E \\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0432 \\u0441\\u0442\\u0440\\u043E\\u043A\\u0435 \\u0441\\u043E\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u044F\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\u0421\\u0430\\u0439\\u0442 \\u0430\\u0434\\u0430\\u043F\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439, \\u043F\\u043E\\u0442\\u043E\\u043C\\u0443 \\u0441\\u043A\\u0440\\u043E\\u043B\\u043B \\u043D\\u0430 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u0435 \\u043F\\u043E\\u044F\\u0432\\u0438\\u0442\\u0441\\u044F \\u043F\\u0440\\u0438 \\u0443\\u043C\\u0435\\u043D\\u044C\\u0448\\u0435\\u043D\\u0438\\u0438 \\u043E\\u043A\\u043D\\u0430\")), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0438\\u043C\\u043E\\u0435 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"\\u0412 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435 \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0438\\u043C\\u043E\\u0433\\u043E \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B, \\u0431\\u044B\\u043B\\u0438 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u044B \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u044E\\u0442\\u0441\\u044F \\u0434\\u043B\\u044F \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438.\"), React.createElement(\"div\", {\n      onClick: this.onClickCell,\n      onDoubleClick: this.editCell,\n      style: {\n        width: '100%',\n        height: '400px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(StickyTable, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"ID\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Username\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Password\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"First Name\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Last Name\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Avatar IMG\"), React.createElement(Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Avatar SRC\")), this.showList())), this.showState());\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    authActive: state.authInfo.authActive,\n    authUser: state.authInfo.authUser\n  };\n}\n\nexport default connect(mapStateToProps)(Table);","map":{"version":3,"sources":["/home/pavel/Projects/Jazz_team/src/components/diary/index.js"],"names":["React","Component","Redirect","connect","StickyTable","Row","Cell","auth","Table","state","editingTd","rowsSelect","rows","onClickCell","event","target","className","trim","finishTdEdit","elem","parentNode","classList","contains","ctrlKey","selectRow","editCell","makeTdEditable","el","setState","add","remove","index","indexOf","splice","showList","map","user","id","username","password","firstName","lastName","avatar","showState","length","TD","td","data","innerHTML","textArea","document","createElement","style","width","clientWidth","height","clientHeight","value","appendChild","focus","insertAdjacentHTML","isOk","firstChild","render","props","authActive","mapStateToProps","authInfo","authUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport { StickyTable, Row, Cell } from 'react-sticky-table';\nimport 'react-sticky-table/dist/react-sticky-table.css';\nimport { auth } from './dateJSON';\n\nclass Table extends Component {\n  state = {\n    editingTd: null,\n    rowsSelect: [],\n    rows: auth,\n  }\n\n  onClickCell = (event) => {\n    const { target } = event;\n    const { state } = this;\n    if (target.className.trim() === 'edit-cancel') {\n      this.finishTdEdit(state.editingTd.elem, false);\n    }\n    if (target.className.trim() === 'edit-ok') {\n      this.finishTdEdit(state.editingTd.elem, true);\n    }\n    if (target.parentNode.classList.contains('sticky-table-row')) {\n      if (event.ctrlKey) {\n        this.selectRow(target.parentNode);\n      }\n    }\n  }\n\n  editCell = (event) => {\n    const { target } = event;\n    const { state } = this;\n    if (target.classList.contains('sticky-table-cell')) {\n      if (state.editingTd) return;\n      this.makeTdEditable(target);\n    }\n  }\n\n  selectRow(el) {\n    const { state } = this;\n    if (!el.classList.contains('row-active')) {\n      this.setState({\n        rowsSelect: [...state.rowsSelect, el],\n      });\n      el.classList.add('row-active');\n    } else {\n      el.classList.remove('row-active');\n      const rowsSelect = [...state.rowsSelect];\n\n\n      const index = rowsSelect.indexOf(el);\n      if (index !== -1) {\n        rowsSelect.splice(index, 1);\n        this.setState({ rowsSelect });\n      }\n    }\n  }\n\n  showList() {\n    const { state } = this;\n    return state.rows.map(user => (\n      <Row key={user.id}>\n        <Cell>{user.id}</Cell>\n        <Cell>{user.username}</Cell>\n        <Cell>{user.password}</Cell>\n        <Cell>{user.firstName}</Cell>\n        <Cell>{user.lastName}</Cell>\n        <Cell><img src={user.avatar} height=\"50\" alt={user.username} /></Cell>\n        <Cell>{user.avatar}</Cell>\n      </Row>\n    ));\n  }\n\n  showState() {\n    const { state } = this;\n    return (\n      <div className=\"stateTable\">\n        <strong>State:</strong>\n        {' '}\n        {state.rows.length}\n        /\n        {state.rowsSelect.length}\n      </div>\n    );\n  }\n\n  makeTdEditable(TD) {\n    const td = TD;\n    this.setState({\n      editingTd: {\n        elem: td,\n        data: td.innerHTML,\n      },\n    });\n\n    td.classList.add('edit-td');\n\n    const textArea = document.createElement('textarea');\n    textArea.style.width = `${td.clientWidth}px`;\n    textArea.style.height = `${td.clientHeight}px`;\n    textArea.className = 'edit-area';\n\n    textArea.value = td.innerHTML;\n    td.innerHTML = '';\n    td.appendChild(textArea);\n    textArea.focus();\n\n    td.insertAdjacentHTML('beforeEnd',\n      '<div class=\"edit-controls\"><button class=\"edit-ok\">OK</button><button class=\"edit-cancel\">CANCEL</button></div>');\n  }\n\n  finishTdEdit(TD, isOk) {\n    const { state } = this;\n    const td = TD;\n    if (isOk) {\n      td.innerHTML = td.firstChild.value;\n    } else {\n      td.innerHTML = state.editingTd.data;\n    }\n    td.classList.remove('edit-td');\n    this.state.editingTd = null;\n  }\n\n  render() {\n    const { props } = this;\n    if (props.authActive === false) {\n      return (<Redirect to=\"/login\" />);\n    }\n    return (\n      <section className=\"full-section\">\n        <h1>Таблицы</h1>\n        <ol>\n          <li>Ждя редактирования таблицы, кликните дважды по нужной вам ечейке</li>\n          <li>Для выделения в таблице, используйте сочитание клавиш CTRL + Левая клавиша мыши</li>\n          <li>Число записей в таблице и число выделенных строк, можно посмотреть в строке состояния</li>\n          <li>Сайт адаптивный, потому скролл на таблице появится при уменьшении окна</li>\n        </ol>\n        <h2>Содержимое таблицы</h2>\n        <p>В качестве содержимого таблицы, были выбраны данные пользователей, которые используются для авторизации.</p>\n        <div onClick={this.onClickCell} onDoubleClick={this.editCell} style={{ width: '100%', height: '400px' }}>\n          <StickyTable>\n            <Row>\n              <Cell>ID</Cell>\n              <Cell>Username</Cell>\n              <Cell>Password</Cell>\n              <Cell>First Name</Cell>\n              <Cell>Last Name</Cell>\n              <Cell>Avatar IMG</Cell>\n              <Cell>Avatar SRC</Cell>\n            </Row>\n            { this.showList() }\n          </StickyTable>\n        </div>\n        { this.showState() }\n      </section>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    authActive: state.authInfo.authActive,\n    authUser: state.authInfo.authUser,\n  };\n}\n\nexport default connect(mapStateToProps)(Table);\n"]},"metadata":{},"sourceType":"module"}